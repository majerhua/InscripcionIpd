<?php

namespace AkademiaBundle\Repository;

/**
 * ComplejoDeportivoRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ComplejoDeportivoRepository extends \Doctrine\ORM\EntityRepository
{

	public function getComplejosDeportivos()
	{

       $query = "select ede_codigo as id, ede_nombre as nombre ,ubicodigo , ede_direccion as direccion, ede_estado as estado, ede_discapacitado as discapacitado from CATASTRO.edificacionesdeportivas;";
        $stmt = $this->getEntityManager()->getConnection()->prepare($query);
        $stmt->execute();
        $complejosDeportivos = $stmt->fetchAll();

        return $complejosDeportivos;        		
	}

	public function getComplejosDeportivosDiscapacitados()
	{
		$query = "select ede_codigo as id, ede_nombre as nombre ,ubicodigo, ede_direccion as direccion, ede_estado as estado,ede_discapacitado as discapacidad from CATASTRO.edificacionesdeportivas where ede_discapacitado='1';";
		$stmt = $this->getEntityManager()->getConnection()->prepare($query);
		$stmt->execute();
		$complejosDeportivos = $stmt->fetchAll();

		return $complejosDeportivos;
	}

	

	public function complejosDeportivosFlagAll($flagDis)
	{
		$query = "select distinct edde.ede_codigo as id, edde.ede_nombre as nombre ,edde.ubicodigo ,edde.ede_direccion as direccion, edde.ede_estado as estado,edde.ede_discapacitado as discapacitado from ACADEMIA.horario AS hor , CATASTRO.edificacionDisciplina as eddis, CATASTRO.edificacionesdeportivas AS edde where hor.discapacitados='$flagDis' and hor.estado=1 and hor.edi_codigo=eddis.edi_codigo and edde.ede_codigo=eddis.ede_codigo and hor.vacantes<>0 and hor.convocatoria=1;";
		$stmt = $this->getEntityManager()->getConnection()->prepare($query);
		$stmt->execute();
		$complejosDeportivos = $stmt->fetchAll();
		return $complejosDeportivos;
	}

}
